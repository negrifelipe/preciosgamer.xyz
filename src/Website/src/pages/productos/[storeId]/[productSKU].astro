---
import ProductInformation from '@/components/ProductInformation.astro';
import ProductPriceCharts from '@/components/ProductPriceCharts';
import Layout from '@/layouts/Layout.astro';
import { getProduct } from '@/lib/get-products';

export const prerender = false; 
const {storeId, productSKU} = Astro.params;

const product = await getProduct(parseInt(storeId ?? "0"), productSKU ?? "");

if(!product) 
    return Astro.redirect("/")
---

<Layout title={`${product.details.name} - Precios Gamer`}>
    <ProductInformation name={product.details.name} price={product.details.price} url={product.details.url} imageUrl={product.details.imageUrl} />

    <hr class="text-neutral-800 my-5" />
    
    <ProductPriceCharts defaultPrices={product.prices} client:only />
    
</Layout>